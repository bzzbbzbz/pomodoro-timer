# Спецификация POMODORO-3: Горячие клавиши RU, README, AGENTS, UI-правки

## Мета
- **TASK_ID**: POMODORO-3
- **Создано**: 2026-02-03
- **Источник**: skill:spec по запросу пользователя

## Требования

### [REQ-POMODORO-3-01] Горячие клавиши на русской раскладке
- **Описание**: Горячие клавиши должны срабатывать независимо от раскладки (русская/английская).
- **Текущее поведение**: В `main.py` обработчик `_on_hotkey` использует `event.keycode` (32 — Space, 82 — R). На части систем при русской раскладке эти коды могут не совпадать или событие обрабатываться иначе.
- **Ожидаемое поведение**: Space — Старт/Пауза, R (физическая клавиша «К» на русской раскладке) — Сброс; срабатывание по физической клавише, а не по символу.
- **Контракт**: Обработка по `keycode` (рекомендуется) или по `keysym` с учётом обеих раскладок (Space + Пробел, R + К). Предпочтительно: использовать keycode, т.к. он привязан к физической клавише; при необходимости добавить дублирование по keysym для русской раскладки.
- **Файлы**: `src/pomodoro/main.py`.

### [REQ-POMODORO-3-02] README.md для GitHub
- **Описание**: В корне репозитория должен быть файл `README.md`, подходящий для отображения на GitHub.
- **Содержание (минимум)**: название проекта, краткое описание (Pomodoro-таймер для Windows, оверлей), как запустить (Python и/или exe), требования (Python 3.10+, tkinter). По желанию: скриншот, горячие клавиши, настройки.
- **Контракт**: Один файл `README.md` в корне; текст на русском или английском по выбору реализации.
- **Файлы**: новый файл `README.md`.

### [REQ-POMODORO-3-03] Убрать упоминания старых архитектур из AGENTS.md
- **Описание**: В `AGENTS.md` не должно оставаться отсылок к устаревшей архитектуре (CLI-оркестрация, opencode, переключение CLI-агентов, старые bash-скрипты).
- **Контракт**: Удалить или переформулировать фразы вида «проект переведен с жесткой CLI-оркестрации (opencode)», «переключение CLI-агентов», «заменяют старые bash-скрипты» так, чтобы описание было актуальным без упоминания старых систем.
- **Файлы**: `AGENTS.md`.

### [REQ-POMODORO-3-04] Убрать подрезку кнопок на 1 px справа и снизу
- **Описание**: Кнопки «Старт», «Помодоро» и «Перерыв» (виджет `RoundedButton`) визуально подрезаны на один пиксель справа и снизу.
- **Причина**: Отрисовка в `rounded_button.py` в границах `(1, 1)` — `(width - 1, height - 1)` при размере Canvas ровно `width`×`height` может давать обрез по краям на части систем.
- **Ожидаемое поведение**: Все четыре края кнопок полностью видны, без обрезки.
- **Контракт**: Либо увеличить размер Canvas на 1 px по ширине и высоте (например, создавать с `width+1`, `height+1` и не менять логику отрисовки), либо скорректировать координаты отрисовки так, чтобы правый и нижний край не обрезались. Не менять визуальный размер кнопок относительно текущего layout (результат — отсутствие подрезки).
- **Файлы**: `src/pomodoro/ui/rounded_button.py`.

### [REQ-POMODORO-3-05] Надпись раздела «Настройки» — белая в тёмной теме
- **Описание**: Заголовок секции «Настройки» (LabelFrame) в тёмной теме должен быть того же цвета, что и остальной текст (светлый/белый).
- **Текущее поведение**: В `SettingsWidget.apply_theme` задаётся `fg` для дочерних Label, Entry, Scale, но для самого `LabelFrame` (`self._frame`) цвет заголовка не устанавливается.
- **Ожидаемое поведение**: При применении тёмной темы у `LabelFrame` с текстом «Настройки» установлен `fg` из палитры темы (как у остального текста).
- **Контракт**: В `SettingsWidget.apply_theme` присвоить `self._frame["fg"] = fg` (или эквивалент), где `fg` берётся из `colors`.
- **Файлы**: `src/pomodoro/ui/settings.py`.

---

## Зависимости
- Нет блокирующих зависимостей от других задач.
- Требования можно реализовывать в любом порядке, кроме логической связки 04 (кнопки) и 05 (настройки) с существующим кодом.

## Критерии приёмки
- [ ] REQ-POMODORO-3-01: Space и R работают при русской раскладке.
- [ ] REQ-POMODORO-3-02: В корне есть `README.md`, пригодный для GitHub.
- [ ] REQ-POMODORO-3-03: В `AGENTS.md` нет упоминаний opencode, CLI-агентов, старых bash-скриптов.
- [ ] REQ-POMODORO-3-04: Кнопки Старт, Помодоро, Перерыв не подрезаны по правому и нижнему краю.
- [ ] REQ-POMODORO-3-05: Надпись «Настройки» в тёмной теме белая/светлая, как остальной текст.
