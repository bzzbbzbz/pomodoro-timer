# POMODORO-1: Pomodoro Timer for Windows (Overlay)

**Created:** 2026-02-03  
**Status:** SPEC_READY  
**Stack:** Python 3.10+, tkinter (stdlib), PyInstaller (packaging)

## Цель

Десктопный Pomodoro-таймер для Windows: полупрозрачное окно поверх всех окон, настраиваемые прозрачность и длительность интервалов, список задач на день с возможностью вычеркивания, отображение активной задачи рядом с таймером. Запуск одним кликом (exe или скрипт).

---

## Требования

### Окно и отображение

- **[REQ-POMODORO-1-01]** Окно приложения при запуске отображается поверх всех остальных окон (always on top).
- **[REQ-POMODORO-1-02]** Окно полупрозрачное; уровень прозрачности настраивается пользователем (например, 0.3–1.0 или в процентах).
- **[REQ-POMODORO-1-03]** Настройки (прозрачность, длительности таймера) сохраняются между сессиями (файл конфига в пользовательской директории или рядом с exe).

### Таймер

- **[REQ-POMODORO-1-04]** Длительность рабочего интервала (pomodoro) настраивается (по умолчанию 25 минут).
- **[REQ-POMODORO-1-05]** Длительность короткого перерыва настраивается (по умолчанию 5 минут).
- **[REQ-POMODORO-1-06]** Отображается обратный отсчёт в формате MM:SS; кнопки Старт / Пауза / Сброс (или эквивалент).
- **[REQ-POMODORO-1-07]** По окончании интервала возможен звуковой/визуальный сигнал (опционально, минимально — смена состояния/текста).

### Задачи на день

- **[REQ-POMODORO-1-08]** Пользователь может указать список задач на день (редактируемый список: добавление, удаление строк).
- **[REQ-POMODORO-1-09]** Задачи можно помечать как выполненные (вычеркивать/галочка).
- **[REQ-POMODORO-1-10]** Одна задача может быть выбрана как активная; её название отображается вместе с таймером (рядом или под счётчиком).
- **[REQ-POMODORO-1-11]** Список задач на день сохраняется между сессиями (тот же конфиг или отдельный файл, например JSON).

### Запуск

- **[REQ-POMODORO-1-12]** Приложение можно запустить одним действием: двойной клик по exe (сборка через PyInstaller) или запуск скрипта (bat/powershell), который вызывает `python -m pomodoro` (или точку входа по соглашению проекта).

---

## Внешние контракты (интерфейс пользователя)

| Элемент            | Контракт |
|--------------------|----------|
| Окно               | Always on top, настраиваемая прозрачность (alpha), фиксированный или ограниченный размер, без полного перекрытия рабочей области по умолчанию (например, компактный угол). |
| Таймер             | Текст MM:SS, кнопки управления (старт/пауза/сброс). |
| Активная задача    | Текст выбранной задачи виден рядом с таймером; выбор из списка (клик/выбор в списке). |
| Список задач       | Список строк + чекбоксы/вычеркивание; добавление новой строки; удаление строки. |
| Настройки          | Прозрачность, длительность pomodoro, длительность перерыва; сохранение в конфиг при изменении. |

---

## Технический стек

| Компонент     | Выбор        | Обоснование |
|---------------|--------------|-------------|
| Язык          | Python 3.10+ | Соответствует правилам проекта, типизация, быстрая разработка. |
| GUI           | tkinter      | Стандартная библиотека, `-topmost`, `-alpha` на Windows, без доп. зависимостей. |
| Конфиг        | JSON или YAML| Файл в `%APPDATA%/<app>` или рядом с exe; pathlib. |
| Упаковка exe  | PyInstaller  | Один exe, `--onefile --windowed`, точка входа — модуль/скрипт таймера. |

---

## Структура проекта (целевая)

```
pomodoro/
  src/
    pomodoro/
      __init__.py
      main.py          # точка входа, создание окна, запуск mainloop
      ui/
        __init__.py
        window.py      # окно overlay, topmost, alpha
        timer.py       # логика и виджет таймера (MM:SS, кнопки)
        tasks.py       # виджет списка задач, активная задача
        settings.py    # UI/логика настроек (прозрачность, длительности)
      config.py        # загрузка/сохранение конфига (pathlib)
  docs/specs/
    POMODORO-1.md
  pyrightconfig.json   # pythonPlatform: "Windows"
  requirements.txt     # при необходимости пустой или pyinstaller
  run.bat / run.ps1    # опционально: python -m pomodoro
```

Точка входа для exe и для `python -m`: пакет `pomodoro` с `main.py` (в `__main__.py` или вызов из `__init__.py`).

---

## Зависимости

- Python 3.10+
- Стандартная библиотека (tkinter входит в установку Python на Windows).
- Для сборки exe: `pyinstaller` (dev/optional).
- Опционально: `pyinstaller` в `requirements-dev.txt` или отдельный `requirements-build.txt`.

---

## Критерии приёмки

1. Запуск exe или `python -m pomodoro` открывает полупрозрачное окно поверх остальных.
2. Прозрачность и длительности интервалов настраиваются и сохраняются.
3. Таймер показывает MM:SS, есть старт/пауза/сброс.
4. Список задач редактируется, задачи можно вычеркивать; активная задача отображается у таймера.
5. После перезапуска приложения настройки и список задач восстанавливаются из конфига.

---

## Риски и ограничения

- Окно может не отображаться поверх полноэкранных игр (ограничение WM Windows); для обычного рабочего стола достаточно.
- Один конфиг/профиль на пользователя (расширение на несколько профилей — вне scope POMODORO-1).
